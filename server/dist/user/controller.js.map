{"version":3,"sources":["../../src/user/controller.js"],"names":["updateProfile","req","res","next","user","comparedPassword","body","password","err","good","status","send","userId","_id","newProfile","name","first","firstName","last","lastName","email","phone","UserModel","findByIdAndUpdate","new","then","sendStatus","catch"],"mappings":";;;;;;AAAA;;;;;;kBAEe;AACXA,mBAAe,uBAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAC/BF,YAAIG,IAAJ,CAASC,gBAAT,CAA0BJ,IAAIK,IAAJ,CAASC,QAAnC,EAA6C,UAACC,GAAD,EAAMC,IAAN,EAAe;AACxD,gBAAID,OAAO,CAACC,IAAZ,EAAkB,OAAOP,IAAIQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBH,OAAO,oBAA5B,CAAP;AAClB,gBAAMI,SAASX,IAAIG,IAAJ,CAASS,GAAxB;AACA,gBAAMC,aAAa;AACfC,sBAAM;AACFC,2BAAOf,IAAIK,IAAJ,CAASW,SADd;AAEFC,0BAAMjB,IAAIK,IAAJ,CAASa;AAFb;AADS,aAAnB;AAMA,mBAAOL,WAAWM,KAAlB;AACA,mBAAON,WAAWO,KAAlB;AACA,mBAAOP,WAAWP,QAAlB;;AAEAe,4BAAUC,iBAAV,CAA4BX,MAA5B,EAAoCE,UAApC,EAAgD,EAACU,KAAK,IAAN,EAAhD,EACCC,IADD,CACM;AAAA,uBAAMvB,IAAIwB,UAAJ,CAAe,GAAf,CAAN;AAAA,aADN,EAECC,KAFD,CAEOxB,IAFP;AAGH,SAhBD;AAiBH;;AAnBU,C","file":"controller.js","sourcesContent":["import UserModel from './model';\r\n\r\nexport default {\r\n    updateProfile: (req, res, next) => {\r\n        req.user.comparedPassword(req.body.password, (err, good) => {\r\n            if (err || !good) return res.status(401).send(err || 'Incorrect Password')\r\n            const userId = req.user._id;\r\n            const newProfile = {\r\n                name: {\r\n                    first: req.body.firstName, \r\n                    last: req.body.lastName\r\n                }\r\n            };\r\n            delete newProfile.email;\r\n            delete newProfile.phone;\r\n            delete newProfile.password;\r\n            \r\n            UserModel.findByIdAndUpdate(userId, newProfile, {new: true})\r\n            .then(() => res.sendStatus(200))\r\n            .catch(next)\r\n        })\r\n    }\r\n    \r\n}\r\n"]}